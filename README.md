# 视频自动播放助手

> 一个支持自动完成网页视频播放、自定义视频播放速度的 Chrome 侧边栏扩展。

---

## 功能特性

- **自动检测网页视频**：支持主页面和 iframe 内所有 <video> 元素。
- **一键完成视频**：点击按钮即可将所有视频进度拉到结尾。
- **自动完成视频**：开启后，页面有新视频或切换集数时自动完成。
- **播放速度控制**：支持多档预设速度和自定义速度。
- **全局设置**：支持设置默认播放速度、自动完成开关、排除网站名单。
- **智能适配**：支持部分视频网站"同一个 video 元素切换 url/集数"场景，自动监听并完成。
- **侧边栏常驻**：所有操作和设置均在侧边栏完成，切换页面/标签自动刷新。

---

## 安装与使用

1. **下载源码**  
   克隆本仓库到本地：
   ```bash
   git clone https://github.com/zbw-zbw/auto-play-video.git
   ```

2. **加载扩展**  
   - 打开 Chrome，进入 `chrome://extensions/`
   - 开启"开发者模式"
   - 点击"加载已解压的扩展程序"，选择本插件的 `extension` 目录

3. **使用方法**  
   - 在任意含有视频的网页，点击浏览器右上角插件图标，侧边栏会自动弹出
   - 侧边栏会自动显示当前页面视频数量
   - 可一键完成视频、设置播放速度、开启自动完成等
   - 支持全局设置（默认速度、排除网站等）

---

## 主要技术实现

- **内容脚本自动注入**，支持动态页面和 SPA 场景
- **MutationObserver** 监听 DOM 变化，自动检测新视频
- **监听 video.src 变化和 url 变化**，适配"同一个 video 元素切换集数"场景
- **智能事件绑定**，只在视频可播放时自动完成，且自动移除监听，避免死循环和内存泄漏
- **侧边栏与网页 tab 智能关联**，始终操作当前窗口下的网页 tab

---

## 常见问题

- **侧边栏显示"请切换到含有视频的网页再操作"？**  
  说明当前没有可用网页 tab，请切换到有视频的网页再操作。

- **自动完成无效？**  
  某些网站切换集数时需等待视频加载完成，插件已自动监听并处理，无需手动刷新。

- **排除网站如何填写？**  
  在设置区每行填写一个域名（如 `bilibili.com`），该网站将不会自动完成视频。

---

## 贡献与反馈

- 欢迎 issue、PR 或建议！
- 仓库地址：[https://github.com/zbw-zbw/auto-play-video](https://github.com/zbw-zbw/auto-play-video)

---

## License

MIT

## 开发说明

### 项目结构
```
extension/
  ├── manifest.json    # 插件配置文件
  ├── popup/          # 弹出窗口相关文件
  │   ├── popup.html
  │   ├── popup.css
  │   └── popup.js
  ├── content/        # 内容脚本
  │   └── content.js
  └── icons/          # 图标文件
      ├── icon16.png
      ├── icon48.png
      └── icon128.png
```

### 开发环境
- Chrome 88+
- 开发者模式

### 测试方法
1. 在 Chrome 中加载插件
2. 访问包含视频的网页
3. 点击插件图标测试功能

## 注意事项

- 目前仅支持原生 video 标签
- 部分网站可能有反爬虫机制
- 建议合理使用，避免违反网站使用条款 
